<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="renderer" content="webkit|ie-comp|ie-stand"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge; chrome=1"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
    <meta name="description" content="international front end blogs">
    <title>DP-BLOG</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="/js/jquery-3.3.1.min.js"></script>
</head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<body class="dp-activation hidden" onload="onload();">
<div class="dp-activation-load" id="loader">
    <div class="load-icon">
        <div class="progress"></div>
        <div class="icon-text"></div>
    </div>
    <div class="load-mask"></div>
</div>
<div class="dp-activation-page">
    <div class="dp-activation-page-home">
        <div class="home-header">
    <div class="header-menu">
        <div class="header-content">
            <a class="menu-item logo" href="/">
                DP-BLOG
            </a>
            <div class="menu-item item">
                <div class="item-content">
                    <a class="item-menu" href="/home">
                        HOME</a>
                    <a class="item-menu" href="/categories">
                        CATEGORY</a>
                    <a class="item-menu" href="/tags">
                        TAG</a>
                    <a class="item-menu" href="/archives">
                        ARCHIVE</a>
                    <div class="item-menu"><i class="iconfont icon-github"></i></div>
                    <div class="item-menu"><i class="iconfont icon-wechat"></i></div>
                    <div class="item-menu" id="item-menu">
                        <div class="x-icon-menu black">
                            <div class="menu-line top"></div>
                            <div class="menu-line middle"></div>
                            <div class="menu-line bottom"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
        <div class="home-main-body">
            <div class="home-max">
                <div class="max-bg"
                     style="background-image:url(http://activation-group.com/Upload/2016060319351297299.png);"></div>
                <div class="max-content">
                    <div class="sub">
                        December 21, 2015
                    </div>
                    Dior Beijing China Flagship Boutique
                </div>
            </div>
            <div class="home-main">
                <div class="section-welcome home-section-loader not-load">
                    <div class="welcome-banner">
                        <div class="header-item for-left">
                            - SELECTED WORK
                        </div>
                    </div>
                    <div class="welcome-content content-wrapper">
                        <div class="content-left for-content detail">
                            <div class="content-title">
                                Christian Dior announced the opening of a brand new Dior boutique in Beijing on December
                                21,
                                2015. It stands out with its double layer glass façade that emulates fine feminine
                                fabric in
                                the iconic Dior 'Cannage' print.
                            </div>
                            <div class="content-info">
                                -
                            </div>
                            <div class="content-info">
                                Date: December 21, 2015
                                <br>
                                Type: PR - Store Opening
                            </div>
                        </div>
                        <div class="content-right">
                            <div class="for-content detail">
                                <div class="content-title-super">~</div>
                                <div class="content-title">
                                    RECAP
                                </div>
                                <div class="content-info">
                                    Christian Dior announced the opening of a brand new Dior boutique in Beijing on
                                    December
                                    21, 2015. It stands out with its double layer glass façade that emulates fine
                                    feminine
                                    fabric in the iconic Dior 'Cannage' print. The two-level bouique is the largest
                                    Christian Dior Flaship in mainland China, as well as the third boutique in Beijing
                                    offering the exclusive world of Dior women's collections including ready-to-wear,
                                    leather goods, accessories, shoes, fine jewelry, timepieces and a VIP lounge.
                                </div>
                                <div class="content-footer">
                                    <div class="footer-icon">
                                        <div class="icon-wrapper">

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="home-max-image home-section-loader not-load">
                <img src="http://activation-group.com/Upload/Dior_Beijing_Flagship_hero_1900x900_pr.jpg"/>
            </div>
            <div class="home-main">
                <div class="section-welcome auto-width home-section-loader not-load">
                    <div class="welcome-banner">
                        <div class="header-item for-left float-left"> - DETAILS</div>
                    </div>
                </div>
                <div class="section-show home-section-loader not-load">
                    <div class="show-wrapper">
                        <p>&emsp;&emsp;文章是关于<code>React</code>组件之表单单行文本输入框的一些思考。可能大家第一反应都是，不就是一行<code>&lt;input/&gt;</code>嘛，没什么特别的吧？如果说到输入框的<code>值</code>的话，可能圈子里上大多数封装好的ReactUI组件库中使用的方式无非都是在组件中通过 <code>Props</code>传值给Input组件，然后在Input组件的<code>onChange</code>回掉中改变当前组件的<code>State</code>，从而达到改变Input组件Props的目的。</p>
<a id="more"></a>
<p>&emsp;&emsp;这里引发一个思考，如果父组件相对复杂，当其中一个Input组件的值被改变时，会更新State触发render和其他所有可能与State相关的子组件（这些字组件的Prop都是通过父组件的State来传递的）的更新，简单的想象一下，我们在输入框中每敲一下键盘都会触发一系列的代码逻辑，这可能会是多恐怖的一件事。</p>
<h2 id="通过Props传值的必要性"><a href="#通过Props传值的必要性" class="headerlink" title="通过Props传值的必要性"></a>通过Props传值的必要性</h2><p>&emsp;&emsp;Input输入框必然是有value这一属性的，如果这个属性是作为State或者Props传递的，要改变这一属性，也是必然通过改变Props或者State来实现，而改变的途径有且只有一个，就是在Input的onChange里面进行监听，正如官方所给的示例代码一样<a href="https://reactjs.org/docs/forms.html" target="_blank" rel="external">Forms-React</a>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">NameForm</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(props) &#123;</div><div class="line">    <span class="keyword">super</span>(props);</div><div class="line">    <span class="keyword">this</span>.state = &#123;<span class="attr">value</span>: <span class="string">''</span>&#125;;</div><div class="line"></div><div class="line">    <span class="keyword">this</span>.handleChange = <span class="keyword">this</span>.handleChange.bind(<span class="keyword">this</span>);</div><div class="line">    <span class="keyword">this</span>.handleSubmit = <span class="keyword">this</span>.handleSubmit.bind(<span class="keyword">this</span>);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  handleChange(event) &#123;</div><div class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">value</span>: event.target.value&#125;);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  handleSubmit(event) &#123;</div><div class="line">    alert(<span class="string">'A name was submitted: '</span> + <span class="keyword">this</span>.state.value);</div><div class="line">    event.preventDefault();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;form onSubmit=&#123;<span class="keyword">this</span>.handleSubmit&#125;&gt;</div><div class="line">        &lt;label&gt;</div><div class="line">          Name:</div><div class="line">          &lt;input type=<span class="string">"text"</span> value=&#123;<span class="keyword">this</span>.state.value&#125; onChange=&#123;<span class="keyword">this</span>.handleChange&#125; /&gt;</div><div class="line">        &lt;<span class="regexp">/label&gt;</span></div><div class="line"><span class="regexp">        &lt;input type="submit" value="Submit" /</span>&gt;</div><div class="line">      &lt;<span class="regexp">/form&gt;</span></div><div class="line"><span class="regexp">    );</span></div><div class="line"><span class="regexp">  &#125;</span></div><div class="line"><span class="regexp">&#125;</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;如果我们想要把这个Input输入框封装成为一个单独的组件，按照我们正常的处理逻辑，这个组件的value一定是通过Props传递过来的，当我们把这个Props作为Input的属性值之后，想要改变的话也就只能通过父组件改变传递的Props来实现了，不可避免的产生了一些改变值和传递值的代码逻辑。</p>
<h2 id="一些优秀UI库的常规处理"><a href="#一些优秀UI库的常规处理" class="headerlink" title="一些优秀UI库的常规处理"></a>一些优秀UI库的常规处理</h2><p>&emsp;&emsp;了解了Input输入框的传值机制之后，我们来看看圈子里一些优秀组件库的处理方式是否和我们预想的一致，是否也有这些不可变的代码逻辑问题。</p>
<h3 id="React-Bootstrap"><a href="#React-Bootstrap" class="headerlink" title="React-Bootstrap"></a>React-Bootstrap</h3><p>&emsp;&emsp;<a href="https://github.com/react-bootstrap/react-bootstrap/blob/master/src/FormControl.js" target="_blank" rel="external">React-Boostrap</a>算是Bootstrap的React版，其权威性也是可见一斑。官方的示例代码也是完全和我们预期的一致，通过onChang回掉来改变父组件的State，之后再把State作为Props传递给子组件，有兴趣可自行查阅。而我们打开源码来看，关键部分如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormControl</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">  	...</div><div class="line">    <span class="keyword">const</span> &#123;</div><div class="line">      componentClass: Component,</div><div class="line">      type,</div><div class="line">      id = controlId,</div><div class="line">      inputRef,</div><div class="line">      className,</div><div class="line">      bsSize,</div><div class="line">      ...props</div><div class="line">    &#125; = <span class="keyword">this</span>.props;</div><div class="line"></div><div class="line">    <span class="keyword">const</span> [bsProps, elementProps] = splitBsProps(props);</div><div class="line">    ...</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;Component</div><div class="line">        &#123;...elementProps&#125;</div><div class="line">        type=&#123;type&#125;</div><div class="line">        id=&#123;id&#125;</div><div class="line">        ref=&#123;inputRef&#125;</div><div class="line">        className=&#123;classNames(className, classes)&#125;</div><div class="line">      /&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;可以解读成就是一个标签的封装，没有自己的State，其值完全依赖于Props的改变，这也和我们预期的结果吻合，而温和的结果就是我们最开始抛出的一些疑问，看来在这里也没得到解决。</p>
<h3 id="ant-design"><a href="#ant-design" class="headerlink" title="ant-design"></a>ant-design</h3><p>&emsp;&emsp;对比一下国人写的ant-design，直接看官方示例代码，当看到这里的时候是否又些小激动呢，代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; Input &#125; <span class="keyword">from</span> <span class="string">'antd'</span>;</div><div class="line"></div><div class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Input</span> <span class="attr">placeholder</span>=<span class="string">"Basic usage"</span> /&gt;</span>, mountNode);</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;似乎摆脱了在回掉的onChange中改变State来传递Props的方式，代码简洁明了。打开源码来看看，<a href="https://github.com/ant-design/ant-design/blob/master/components/input/Input.tsx" target="_blank" rel="external">ant-design</a>，截取关键部分代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">renderInput() &#123;</div><div class="line">    <span class="keyword">const</span> &#123; value, className &#125; = <span class="keyword">this</span>.props;</div><div class="line">    <span class="keyword">const</span> otherProps = omit(<span class="keyword">this</span>.props, [</div><div class="line">      <span class="string">'prefixCls'</span>,</div><div class="line">      <span class="string">'onPressEnter'</span>,</div><div class="line">      <span class="string">'addonBefore'</span>,</div><div class="line">      <span class="string">'addonAfter'</span>,</div><div class="line">      <span class="string">'prefix'</span>,</div><div class="line">      <span class="string">'suffix'</span>,</div><div class="line">    ]);</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (<span class="string">'value'</span> <span class="keyword">in</span> <span class="keyword">this</span>.props) &#123;</div><div class="line">      otherProps.value = fixControlledValue(value);</div><div class="line">      <span class="comment">// Input elements must be either controlled or uncontrolled,</span></div><div class="line">      <span class="comment">// specify either the value prop, or the defaultValue prop, but not both.</span></div><div class="line">      <span class="keyword">delete</span> otherProps.defaultValue;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.renderLabeledIcon(</div><div class="line">      &lt;input</div><div class="line">        &#123;...otherProps&#125;</div><div class="line">        className=&#123;classNames(<span class="keyword">this</span>.getInputClassName(), className)&#125;</div><div class="line">        onKeyDown=&#123;<span class="keyword">this</span>.handleKeyDown&#125;</div><div class="line">        ref=<span class="string">"input"</span></div><div class="line">      /&gt;,</div><div class="line">    );</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;可以很明显的看到，整个组件也并没有State，所有的状态也都是通过Props来进行管理的，并没有看出其奇特之处在哪儿。如果我们在官方示例中加入一个属性，<em>value=”xxxx”</em>，如此一来，想要改变这个值也是和之前的处理如出一辙。</p>
<h3 id="react-ui"><a href="#react-ui" class="headerlink" title="react-ui"></a>react-ui</h3><p>&emsp;&emsp;也是国人写的一个框架，相对来说名气较小。直接打开其源码来看，<a href="https://github.com/Lobos/react-ui/blob/master/src/Input.js" target="_blank" rel="external">react-ui</a>，关键代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">constructor</span> (props) &#123;</div><div class="line">    <span class="keyword">super</span>(props)</div><div class="line">    <span class="keyword">this</span>.handleChange = <span class="keyword">this</span>.handleChange.bind(<span class="keyword">this</span>)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  handleChange (event) &#123;</div><div class="line">    <span class="keyword">const</span> &#123; type &#125; = <span class="keyword">this</span>.props</div><div class="line"></div><div class="line">    <span class="keyword">let</span> value = event.target.value</div><div class="line">    <span class="keyword">if</span> (value &amp;&amp; (type === <span class="string">'integer'</span> || type === <span class="string">'number'</span>)) &#123;</div><div class="line">      <span class="keyword">if</span> (!Regs[type].test(value)) <span class="keyword">return</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">this</span>.props.onChange(value)</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;很常规的一种处理，和上面的处理方式唯一不同在于语法上面的一些差异，可能这也并非我们想要看到的。</p>
<p>&emsp;&emsp;是否真的有那么一种处理机制和我们预想不一样，并且能够解决我们的疑问呢？</p>
<h3 id="MUI"><a href="#MUI" class="headerlink" title="MUI"></a>MUI</h3><p>&emsp;&emsp;直接打开源码来看，<a href="MUI https://github.com/muicss/mui/blob/master/src/react/text-field.jsx">MUI</a>，关键部分如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">constructor</span>(props) &#123;</div><div class="line">    <span class="keyword">super</span>(props);</div><div class="line">    <span class="keyword">let</span> value = props.value;</div><div class="line">    <span class="keyword">let</span> innerValue = value || props.defaultValue;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (innerValue === <span class="literal">undefined</span>) innerValue = <span class="string">''</span>;</div><div class="line"></div><div class="line">    <span class="keyword">this</span>.state = &#123;</div><div class="line">      innerValue: innerValue,</div><div class="line">      isTouched: <span class="literal">false</span>,</div><div class="line">      isPristine: <span class="literal">true</span></div><div class="line">    &#125;;</div><div class="line">    ...</div><div class="line">  &#125;</div><div class="line">  componentWillReceiveProps(nextProps) &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="string">'value'</span> <span class="keyword">in</span> nextProps) <span class="keyword">this</span>.setState(&#123; <span class="attr">innerValue</span>: nextProps.value &#125;);</div><div class="line">  &#125;</div><div class="line">  onChange(ev) &#123;</div><div class="line">    <span class="keyword">this</span>.setState(&#123;</div><div class="line">      innerValue: ev.target.value,</div><div class="line">      isPristine: <span class="literal">false</span></div><div class="line">    &#125;);</div><div class="line">    ...</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;可以看到，这个UI的处理方式和之前所见就都有所不同了，不同之处在于，把传入进来的Props.value又做了额外的处理，塞到State里面去了，这样改变input value的方式就可以只改变当前这个组件的state来进行了，而不需要再次通过改变回掉到父组件改变State，重新传入Props的方式来进行。看到这里是不是有一丝的欣慰呢？但是冷静一想，好像是把问题搞复杂了：</p>
<ul>
<li>为什么需要通过计算传入Props来当作State呢，既然可以通过Props计算得到，拿这个属性应该不是一个State；</li>
<li>componentWillReceiveProps中又要处理判断一些逻辑，而且这个逻辑很有可能要与自己的业务相关，从而来决定是否需要改变State，这些逻辑并非是我们想要看到的。</li>
</ul>
<h3 id="metarial-design"><a href="#metarial-design" class="headerlink" title="metarial-design"></a>metarial-design</h3><p>&emsp;&emsp;所谓扁平化至极的风格，看看源码里面究竟怎么处理这个问题呢，<a href="https://github.com/callemall/material-ui/blob/v1-beta/src/Input/Input.js" target="_blank" rel="external">metarial-design</a>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">handleRefInput = <span class="function"><span class="params">node</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">this</span>.input = node;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.props.inputRef) &#123;</div><div class="line">      <span class="keyword">this</span>.props.inputRef(node);</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line"></div><div class="line"><span class="keyword">let</span> inputProps = &#123;</div><div class="line">      ref: <span class="keyword">this</span>.handleRefInput,</div><div class="line">      ...inputPropsProp,</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;div onBlur=&#123;<span class="keyword">this</span>.handleBlur&#125; onFocus=&#123;<span class="keyword">this</span>.handleFocus&#125; className=&#123;className&#125; &#123;...other&#125;&gt;</div><div class="line">        &lt;InputComponent</div><div class="line">          &#123;...inputProps&#125;</div><div class="line">        /&gt;</div><div class="line">      &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">    );</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;其中有一处关键处理和之前看到的都不一样，这个<code>ref</code>属性，直接赋值<code>this.input=input</code>（当然它还有额外的函数处理，这里并不影响），这行代码究竟有什么神奇的效果嘛，应该只是单纯的直接从DOM里面取值或者进行一些直接修改DOM的操作吧？。最后看看官方有没有相关的解释。</p>
<h3 id="React官网"><a href="#React官网" class="headerlink" title="React官网"></a>React官网</h3><p>&emsp;&emsp;仔细查阅，找到了一篇相关的文章说明<a href="https://reactjs.org/docs/uncontrolled-components.html" target="_blank" rel="external">Uncontroled Components</a>。这篇文章详细的介绍我们的疑惑（看来这些疑问并非是想当然的，实实在在有这个问题）。</p>
<blockquote>
<p>In most cases, we recommend using controlled components to implement forms. In a controlled component, form data is handled by a React component. The alternative is uncontrolled components, where form data is handled by the DOM itself.</p>
</blockquote>
<p>&emsp;&emsp;看到这里应该就豁然开朗了，所以所谓正确的姿势：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;form onSubmit=&#123;<span class="keyword">this</span>.handleSubmit&#125;&gt;</div><div class="line">        &lt;label&gt;</div><div class="line">          Name:</div><div class="line">          &lt;input type=<span class="string">"text"</span> ref=&#123;(input) =&gt; <span class="keyword">this</span>.input = input&#125; /&gt;</div><div class="line">        &lt;<span class="regexp">/label&gt;</span></div><div class="line"><span class="regexp">        &lt;input type="submit" value="Submit" /</span>&gt;</div><div class="line">      &lt;<span class="regexp">/form&gt;</span></div><div class="line"><span class="regexp">    );</span></div><div class="line"><span class="regexp">  &#125;</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;看了之后，就能理解material-design和ant-design的写法了，如果想要默认值，正如官方所说：</p>
<blockquote>
<p>In the React rendering lifecycle, the value attribute on form elements will override the value in the DOM. With an uncontrolled component, you often want React to specify the initial value, but leave subsequent updates uncontrolled. To handle this case, you can specify a defaultValue attribute instead of value.</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">render() &#123;</div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    &lt;form onSubmit=&#123;<span class="keyword">this</span>.handleSubmit&#125;&gt;</div><div class="line">      &lt;label&gt;</div><div class="line">        Name:</div><div class="line">        &lt;input</div><div class="line">          defaultValue=<span class="string">"Bob"</span></div><div class="line">          type=<span class="string">"text"</span></div><div class="line">          ref=&#123;(input) =&gt; <span class="keyword">this</span>.input = input&#125; /&gt;</div><div class="line">      &lt;<span class="regexp">/label&gt;</span></div><div class="line"><span class="regexp">      &lt;input type="submit" value="Submit" /</span>&gt;</div><div class="line">    &lt;<span class="regexp">/form&gt;</span></div><div class="line"><span class="regexp">  );</span></div><div class="line"><span class="regexp">&#125;</span></div></pre></td></tr></table></figure>
<p>&emsp;&emsp;来回往复，直接一个defaultValue解决了我们的疑惑，原本就在官方网站摆着却看似明白不清楚具体场景，想的太多做的太少。</p>

                    </div>
                    <div class="show-menu">
                        <div class="dp-activation-toc" id="toc">
                            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#通过Props传值的必要性"><span class="toc-number">1.</span> <span class="toc-text">通过Props传值的必要性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#一些优秀UI库的常规处理"><span class="toc-number">2.</span> <span class="toc-text">一些优秀UI库的常规处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#React-Bootstrap"><span class="toc-number">2.1.</span> <span class="toc-text">React-Bootstrap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ant-design"><span class="toc-number">2.2.</span> <span class="toc-text">ant-design</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#react-ui"><span class="toc-number">2.3.</span> <span class="toc-text">react-ui</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MUI"><span class="toc-number">2.4.</span> <span class="toc-text">MUI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#metarial-design"><span class="toc-number">2.5.</span> <span class="toc-text">metarial-design</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#React官网"><span class="toc-number">2.6.</span> <span class="toc-text">React官网</span></a></li></ol></li></ol>
                        </div>
                    </div>
                </div>
                <div class="section-page home-section-loader not-load" id="post-footer">
                    <div class="page prev">
                        <div class="page-arrow-wrapper">
                            <div class="page-arrow">
                            </div>
                        </div>
                    </div>
                    <div class="page">
                        <div class="page-arrow-wrapper">
                            <div class="page-arrow">
                            </div>
                        </div>
                    </div>
                    <div class="page-info">
                        <div class="info-title">
                            Projects under
                        </div>
                        <div class="info-title">
                            archive-
                        </div>
                        <div class="info-title">
                            4/121
                        </div>
                        <div class="info-info">
                            We bring our ideas alive.
                        </div>
                    </div>
                </div>
            </div>
            <div class="home-group-footer home-section-loader not-load">
                <div class="footer-item white">
                    <div class="item-wrapper">
                        <div class="item-title">
                            AGENCY
                        </div>
                        <div class="item-info">
                            Find out more information about our agency
                        </div>
                    </div>
                </div>
                <div class="footer-item grey">
                    <div class="item-wrapper">
                        <div class="item-title">
                            WORK
                        </div>
                        <div class="item-info">
                            Find out more about our Culture, Leadership and Career
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="home-footer">
    <div class="footer-content">
        <div class="content-line">
            <div class="line-item">
                <div class="title large">CONTACT</div>
                <div class="info">For enquiries related to human resources, please contact:
                    <a href="mailto:hr@fanmaodong.com">hr@fanmaodong.com</a>
                </div>
                <div class="info">For other enquiries, please contact:
                    <a href="mailto:info@fanmaodong.com">info@fanmaodong.com</a></div>
            </div>
        </div>
        <div class="content-line">
            <div class="line-item">
                <div class="title">SHANGHAI</div>
                <div class="info">5/F & 8/F, No. 399A Liu Zhou Rd, Xu Hui District, Shanghai, China
                    PO. 200235
                </div>
                <div class="info">TEL. +8621 6248 8023</div>
            </div>
            <div class="line-item">
                <div class="title">BEIJING</div>
                <div class="info">798 Art District (Seven Star Middle Street). No. 4, Jiu Xian Qiao Road, Chao
                    Yang District, Beijing, China
                    PO. 100015
                </div>
                <div class="info">TEL. +8621 6248 8023</div>
            </div>
            <div class="line-item">
                <div class="title">HONG KONG</div>
                <div class="info">11/F, Gold Union Commercial Building, No. 70-72 Connaught Road West, Hong Kong
                </div>
                <div class="info">TEL. +852 3468 6918</div>
            </div>
        </div>
        <div class="content-line">
            <div class="line-item">
                <div class="title">SINGAPORE</div>
                <div class="info">226B South Bridge Road Singapore
                    PO.058775
                </div>
                <div class="info">TEL. +65 6221 6818</div>
            </div>
            <div class="line-item empty">

            </div>
            <div class="line-item empty">

            </div>
        </div>
    </div>
    <div class="footer-wrapper">
        <div class="footer-copyright">
            <div class="item">
                <a href="/categories">CATEGORY</a>
            </div>
            <div class="item">
                <a href="/tags">TAG</a>
            </div>
            <div class="item">
                <a href="/archives">ARCHIVE</a>
            </div>
            <div class="copy-right">
                2018 (C) All Rights Reserved by DP-BLOG GROUP.
            </div>
        </div>
    </div>
</div>
        <div class="home-menu-mask" id="menu-mask">
    <div class="mask-content">
        <div class="content-item separator">
            <a href="/categories" class="item-title">Category</a>
            <div class="item-info">
                We are a fully integrated marketing agency focusing on event, Public Relations, digital
                and
                décor services for the premium brands. Welcome to learn more about us at our history,
                our
                workplaces and works of our clients
            </div>
            <div class="item-separator">-</div>
            <div class="icon-wrapper">
                ≠
            </div>
        </div>
        <div class="content-item separator">
            <a href="/tags" class="item-title">Tag</a>
            <div class="item-info">
                Meet our management team and our multi-disciplinary team leaders. Check out the
                opportunity
                to join us!
                <br>
                Check out the opportunity to join us!
            </div>
            <div class="item-separator">-</div>
            <div class="icon-wrapper">
                ≠
            </div>
        </div>
        <div class="content-item separator">
            <a class="item-title" href="/archives">Archive</a>
            <div class="item-info">Welcome to View our selected projects as featured below to share the
                joy
                and pride with us
            </div>
            <div class="item-separator">-</div>
            <div class="item-footer">
                
                
                
                <a class="footer-item" href="/2017/10/12/一行文本输入框引发的思考/">由一行文本输入框引发的思考</a>
                
                <a class="footer-item" href="/2017/09/20/React基础向导（三）/">react基础向导（三）</a>
                
                <a class="footer-item" href="/2017/09/11/React基础向导（二）/">react基础向导（二）</a>
                
                <a class="footer-item" href="/2017/09/10/React基础向导（一）/">React基础向导（一）</a>
                
                <a class="footer-item" href="/2017/08/30/canvas动画从入门到弃疗（二）/">canvas动画从入门到弃疗（二）</a>
                
                <br>
                
                <a class="footer-item" href="/2017/06/23/从无到有摸索一个常规流程图制作的核心思路/">从无到有摸索一个常规流程图制作的核心思路</a>
                
                <a class="footer-item" href="/2017/05/04/gulp学习笔记/">gulp学习笔记</a>
                
                <a class="footer-item" href="/2017/04/21/web调试利器——Fiddler/">前端调试利器——Fiddler</a>
                
                <a class="footer-item" href="/2017/03/17/浅谈js继承的两种实现方式/">浅谈js继承的两种实现方式</a>
                
                <a class="footer-item" href="/2017/03/11/jquery事件绑定（一）——基础用法/">jquery事件绑定（一）——基础用法</a>
                
                <a class="footer-item" href="/2017/02/25/redux学习笔记（基础篇）/">redux学习笔记（基础篇）</a>
                
                <a class="footer-item" href="/2017/01/14/webStorm-git开发利器的常用功能（下）/">webStorm+git开发利器的常用功能（下）</a>
                
            </div>
            <div class="icon-wrapper close" id="menu-close"></div>
        </div>
    </div>
</div>
    </div>
</div>
</body>

<script>
    var onload = function () {
        $('#loader').data('plugin_dpPage').onload();
    }
    $(document).ready(function () {
        var $max = $('.home-max');
        if ($max.length) {
            var height = 100;
            if ($(window).width() < 768) {
                height = 60;
            }
            $max.css('height', $(window).height() - height)
        }
        $('#loader').dpPage();
        $('figure table').each(function (i, e) {
            hljs.highlightBlock(e)
        });
        var $toc = $('#toc');
        var $links = $('.toc-link', $toc);
        if ($links && $links.length) {
            $links.eq(0).addClass('active');
        }
        $links.click(function (e) {
            e.preventDefault();
            var href = $(e.currentTarget).attr('href');
            var $target = $(href);
            if ($target.length > 0) {
                $('html, body').animate({
                    scrollTop: $target.offset().top - 120
                }, 400);
            }
            return false;
        });
        var $cloneToc = $toc
            .clone(true)
            .removeAttr('id')
            .addClass('fixed hidden')
            .css({
                left: parseInt($toc.offset().left, 10) + 'px',
                top: '120px',
                right: 'auto',
                width: $toc.outerWidth()
            })
            .appendTo('body');
        $(window).scroll(function () {
            var scrollTop = $(window).scrollTop() + 120;
            if (scrollTop > $toc.offset().top) {
                $cloneToc.removeClass('hidden');
                $toc.addClass('hidden');
            } else {
                $cloneToc.addClass('hidden');
                $toc.removeClass('hidden');
            }
        });
    })
</script>
<script src="/js/page.js"></script>
</html>